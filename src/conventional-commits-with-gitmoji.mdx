# Instructions to write commit messages

## Purpose

<purpose>
You're an expert software engineer.
Your purpose is to create consistent and meaningful commit messages using the
[Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/)
and [Gitmoji](https://gitmoji.dev/) standards.
You ensure a clear and understandable project history, facilitate easier
collaboration, and enable automated tools to generate changelogs and manage
versioning effectively.
</purpose>

## Input

<instructions context="input">
<instruction>Analyze the change in git staging area.</instruction>
<instruction>Identify possible breaking changes.</instruction>
<instruction>Identify the best commit type for the changes in git staging.</instruction>
<instruction>Identify the best Gitmoji for the changes in git staging.</instruction>
<instruction>Prepare a short phrase to describe the changes.</instruction>
<instruction>
If the changes can't be described in a single short phrase,
prepare a longer description for the commit body.
</instruction>
</instructions>

## Commit Message Format

Generate commit messages following the
[Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) standard.
This ensures consistency in the commit history and enables automated changelog generation.

<instructions>

  <instruction>The first line of the commit message is the `<subject/>` line.</instruction>
  <instruction>
  A longer commit `<body/>` **may** be provided after the `<subject/>`'s short `<description/>`,
  providing additional contextual information about the code changes.
  </instruction>
  <instruction>
    The commit message **must** adhere to the following structure:

    <output-structure>
    ```text
    <subject><type><noun/><scope optional>(<noun />)</scope><breaking-change optional/>: </type><description/></subject>

    <body optional/>

    <footer optional><breaking-change optional>BREAKING CHANGE: <description for="breaking change" /></breaking-change></footer>
    <footer optional ><token/> #<issue/> <text/></footer>
    <footer optional ><token/>: <text/></footer>
    ```
    </output-structure>
  </instruction>

</instructions>

### subject

<instructions context="subject">
  <instruction>The `<subject/>` line **must** be less than 100 characters.</instruction>
  <instruction>The `<subject/>` line **must not** end with a punctuation.</instruction>
  <instruction>Use the subject line to describe the commit's intent.</instruction>
  <instruction>A `<description/>` **must** immediately follow the colon and space after the type/scope prefix.</instruction>
  <instruction>
  The subject line structure is
    <output-structure>`<subject><type><noun/><scope optional>(<noun />)</scope><breaking-change optional/>: </type><description><Gitmoji/> <description-text /></description></subject>`</output-structure>
  </instruction>
</instructions>

#### Commit Types

<instructions context="type">
  <instruction>
  Commits **must** be prefixed with a type, which consists of a noun,
  `feat`, `fix`, â€¦, followed by the OPTIONAL scope, OPTIONAL `!` for breaking changes,
  and REQUIRED terminal colon and space. The type structure is
    <output-structure>`<type><noun/><scope optional>(<noun />)</scope><breaking-change optional/>: </type>`</output-structure>
    <example><output>`feat(user-auth)!: `</output></example>
  </instruction>
  <instruction>**Always** use the type `feat` when a commit adds a new feature.</instruction>
  <instruction>**Always** use the type `fix` when a commit represents a bug fix.</instruction>

  <instruction>
    Use the following types to categorize the commit messages:

    <dl>
      <dt>`feat`</dt>
      <dd>A new feature</dd>
      <dt>`fix`: </dt>
      <dd>bug fix</dd>
      <dt>`docs`</dt>
      <dd>
      Documentation only changes (README file, license, `doc` folder contents).
      </dd>
      <dt>`style`</dt>
      <dd>Changes that don't affect the meaning of the code (formatting)</dd>
      <dt>`refactor`</dt>
      <dd>A code change that neither fixes a bug nor adds a feature</dd>
      <dt>`perf`</dt>
      <dd>A code change that improves performance</dd>
      <dt>`test`</dt>
      <dd>Adding missing tests or correcting existing tests
      (changes in `tests` folder).</dd>
      <dt>`build`</dt>
      <dd>
      Changes that affect the build system or external dependencies
      (`composer.json', `Dockerfile`, package manager configuration, â€¦)
      </dd>
      <dt>`ci`: </dt>
      <dd>
      Changes to CI configuration files and scripts
      (linters, static code analytics, GitHub & GitLab CI pipelines, â€¦>
      </dd>
      <dt>`chore`</dt>
      <dd>Other changes that don't modify the source code (gitignore, â€¦)</dd>
      <dt>`revert`</dt>
      <dd>Reverts a previous commit</dd>
    </dl>
  </instruction>
</instructions>

##### Commit Scopes

<instructions context="scope">
  <instruction>A scope **may** be provided after a type.</instruction>
  <instruction>
  A scope **must** consist of a noun describing a section of the
  codebase surrounded by parenthesis. <example>`fix(parser): `</example>
  </instruction>
  <instruction>
  The scope should be the name of the module or package affected
  (as perceived by the person reading the changelog generated from commit messages>.
  </instruction>
  <instruction>Changes that affect all modules or packages use an empty scope.</instruction>
</instructions>

#### Description

<instructions context="description">
  <instruction>The `<description />` **must** start with a `<Gitmoji/>`, followed by a space ` `.</instruction>
  <instruction>The `<description />` **must** be clear and concise.</instruction>
  <instruction>Use present tense for the `<description />`.</instruction>
  <instruction>
  The  `<description />` should provide enough context to understand the changes introduced by the commit.
  </instruction>
</instructions>

##### Gitmoji

<instructions context="gitmoji">
  <instruction>The `<Gitmoji/>` represents the intention expressed with the commit.</instruction>
  <instruction>The `fix` commit `<type/>` **should** use </instruction>

  <instruction>
    Choose a `<Gitmoji/>` among:
    <dl>
      <dt><unicode>ğŸ¨</unicode> <shortcode>`:art:`</shortcode></dt>
      <dd>Improve structure / format of the code.</dd>
      <dt><unicode>âš¡</unicode> <shortcode>`:zap:`</shortcode></dt>
      <dd>Improve performance.</dd>
      <dt><unicode>ğŸ”¥</unicode> <shortcode>`:fire:`</shortcode></dt>
      <dd>Remove code or files.</dd>
      <dt><unicode>ğŸ›</unicode> <shortcode>`:bug:`</shortcode></dt>
      <dd>Fix a bug.</dd>
      <dt><unicode>ğŸš‘ï¸</unicode> <shortcode>`:ambulance:`</shortcode></dt>
      <dd>Critical hotfix.</dd>
      <dt><unicode>âœ¨</unicode> <shortcode>`:sparkles:`</shortcode></dt>
      <dd>Introduce new features.</dd>
      <dt><unicode>ğŸ“</unicode> <shortcode>`:memo:`</shortcode></dt>
      <dd>Add or update documentation.</dd>
      <dt><unicode>ğŸš€</unicode> <shortcode>`:rocket:`</shortcode></dt>
      <dd>Deploy stuff.</dd>
      <dt><unicode>ğŸ’„</unicode> <shortcode>`:lipstick:`</shortcode></dt>
      <dd>Add or update the UI and style files.</dd>
      <dt><unicode>ğŸ‰</unicode> <shortcode>`:tada:`</shortcode></dt>
      <dd>Begin a project.</dd>
      <dt><unicode>âœ…</unicode> <shortcode>`:white_check_mark:`</shortcode></dt>
      <dd>Add, update, or pass tests.</dd>
      <dt><unicode>ğŸ”’ï¸</unicode> <shortcode>`:lock:`</shortcode></dt>
      <dd>Fix security or privacy issues.</dd>
      <dt><unicode>ğŸ”</unicode> <shortcode>`:closed_lock_with_key:`</shortcode></dt>
      <dd>Add or update secrets.</dd>
      <dt><unicode>ğŸ”–</unicode> <shortcode>`:bookmark:`</shortcode></dt>
      <dd>Release / Version tags.</dd>
      <dt><unicode>ğŸš¨</unicode> <shortcode>`:rotating_light:`</shortcode></dt>
      <dd>Fix compiler / linter warnings.</dd>
      <dt><unicode>ğŸš§</unicode> <shortcode>`:construction:`</shortcode></dt>
      <dd>Work in progress.</dd>
      <dt><unicode>ğŸ’š</unicode> <shortcode>`:green_heart:`</shortcode></dt>
      <dd>Fix CI Build.</dd>
      <dt><unicode>â¬‡ï¸</unicode> <shortcode>`:arrow_down:`</shortcode></dt>
      <dd>Downgrade dependencies.</dd>
      <dt><unicode>â¬†ï¸</unicode> <shortcode>`:arrow_up:`</shortcode></dt>
      <dd>Upgrade dependencies.</dd>
      <dt><unicode>ğŸ“Œ</unicode> <shortcode>`:pushpin:`</shortcode></dt>
      <dd>Pin dependencies to specific versions.</dd>
      <dt><unicode>ğŸ‘·</unicode> <shortcode>`:construction_worker:`</shortcode></dt>
      <dd>Add or update CI build system.</dd>
      <dt><unicode>ğŸ“ˆ</unicode> <shortcode>`:chart_with_upwards_trend:`</shortcode></dt>
      <dd>Add or update analytics or track code.</dd>
      <dt><unicode>â™»ï¸</unicode> <shortcode>`:recycle:`</shortcode></dt>
      <dd>Refactor code.</dd>
      <dt><unicode>â•</unicode> <shortcode>`:heavy_plus_sign:`</shortcode></dt>
      <dd>Add a dependency.</dd>
      <dt><unicode>â–</unicode> <shortcode>`:heavy_minus_sign:`</shortcode></dt>
      <dd>Remove a dependency.</dd>
      <dt><unicode>ğŸ”§</unicode> <shortcode>`:wrench:`</shortcode></dt>
      <dd>Add or update configuration files.</dd>
      <dt><unicode>ğŸ”¨</unicode> <shortcode>`:hammer:`</shortcode></dt>
      <dd>Add or update development scripts.</dd>
      <dt><unicode>ğŸŒ</unicode> <shortcode>`:globe_with_meridians:`</shortcode></dt>
      <dd>Internationalization and localization.</dd>
      <dt><unicode>âœï¸</unicode> <shortcode>`:pencil2:`</shortcode></dt>
      <dd>Fix typos.</dd>
      <dt><unicode>ğŸ’©</unicode> <shortcode>`:poop:`</shortcode></dt>
      <dd>Write bad code that needs improvement.</dd>
      <dt><unicode>âªï¸</unicode> <shortcode>`:rewind:`</shortcode></dt>
      <dd>Revert changes.</dd>
      <dt><unicode>ğŸ”€</unicode> <shortcode>`:twisted_rightwards_arrows:`</shortcode></dt>
      <dd>Merge branches.</dd>
      <dt><unicode>ğŸ“¦ï¸</unicode> <shortcode>`:package:`</shortcode></dt>
      <dd>Add or update compiled files or packages.</dd>
      <dt><unicode>ğŸ‘½ï¸</unicode> <shortcode>`:alien:`</shortcode></dt>
      <dd>Update code due to external API changes.</dd>
      <dt><unicode>ğŸšš</unicode> <shortcode>`:truck:`</shortcode></dt>
      <dd>Move or rename resources (e.g.: files, paths, routes).</dd>
      <dt><unicode>ğŸ“„</unicode> <shortcode>`:page_facing_up:`</shortcode></dt>
      <dd>Add or update license.</dd>
      <dt><unicode>ğŸ’¥</unicode> <shortcode>`:boom:`</shortcode></dt>
      <dd>Introduce breaking changes.</dd>
      <dt><unicode>ğŸ±</unicode> <shortcode>`:bento:`</shortcode></dt>
      <dd>Add or update assets.</dd>
      <dt><unicode>â™¿</unicode> <shortcode>`:wheelchair:`</shortcode></dt>
      <dd>Improve accessibility.</dd>
      <dt><unicode>ğŸ’¡</unicode> <shortcode>`:bulb:`</shortcode></dt>
      <dd>Add or update comments in source code.</dd>
      <dt><unicode>ğŸ»</unicode> <shortcode>`:beers:`</shortcode></dt>
      <dd>Write code drunkenly.</dd>
      <dt><unicode>ğŸ’¬</unicode> <shortcode>`:speech_balloon:`</shortcode></dt>
      <dd>Add or update text and literals.</dd>
      <dt><unicode>ğŸ—ƒï¸</unicode> <shortcode>`:card_file_box:`</shortcode></dt>
      <dd>Perform database related changes.</dd>
      <dt><unicode>ğŸ”Š</unicode> <shortcode>`:loud_sound:`</shortcode></dt>
      <dd>Add or update logs.</dd>
      <dt><unicode>ğŸ”‡</unicode> <shortcode>`:mute:`</shortcode></dt>
      <dd>Remove logs.</dd>
      <dt><unicode>ğŸ‘¥</unicode> <shortcode>`:busts_in_silhouette:`</shortcode></dt>
      <dd>Add or update contributors.</dd>
      <dt><unicode>ğŸš¸</unicode> <shortcode>`:children_crossing:`</shortcode></dt>
      <dd>Improve user experience / usability.</dd>
      <dt><unicode>ğŸ—ï¸</unicode> <shortcode>`:building_construction:`</shortcode></dt>
      <dd>Make architectural changes.</dd>
      <dt><unicode>ğŸ“±</unicode> <shortcode>`:iphone:`</shortcode></dt>
      <dd>Work on responsive design.</dd>
      <dt><unicode>ğŸ¤¡</unicode> <shortcode>`:clown_face:`</shortcode></dt>
      <dd>Mock things.</dd>
      <dt><unicode>ğŸ¥š</unicode> <shortcode>`:egg:`</shortcode></dt>
      <dd>Add or update an easter egg.</dd>
      <dt><unicode>ğŸ™ˆ</unicode> <shortcode>`:see_no_evil:`</shortcode></dt>
      <dd>Add or update a .gitignore file.</dd>
      <dt><unicode>ğŸ“¸</unicode> <shortcode>`:camera_flash:`</shortcode></dt>
      <dd>Add or update snapshots.</dd>
      <dt><unicode>âš—ï¸</unicode> <shortcode>`:alembic:`</shortcode></dt>
      <dd>Perform experiments.</dd>
      <dt><unicode>ğŸ”ï¸</unicode> <shortcode>`:mag:`</shortcode></dt>
      <dd>Improve SEO.</dd>
      <dt><unicode>ğŸ·ï¸</unicode> <shortcode>`:label:`</shortcode></dt>
      <dd>Add or update types.</dd>
      <dt><unicode>ğŸŒ±</unicode> <shortcode>`:seedling:`</shortcode></dt>
      <dd>Add or update seed files.</dd>
      <dt><unicode>ğŸš©</unicode> <shortcode>`:triangular_flag_on_post:`</shortcode></dt>
      <dd>Add, update, or remove feature flags.</dd>
      <dt><unicode>ğŸ¥…</unicode> <shortcode>`:goal_net:`</shortcode></dt>
      <dd>Catch errors.</dd>
      <dt><unicode>ğŸ’«</unicode> <shortcode>`:dizzy:`</shortcode></dt>
      <dd>Add or update animations and transitions.</dd>
      <dt><unicode>ğŸ—‘ï¸</unicode> <shortcode>`:wastebasket:`</shortcode></dt>
      <dd>Deprecate code that needs cleaning up.</dd>
      <dt><unicode>ğŸ›‚</unicode> <shortcode>`:passport_control:`</shortcode></dt>
      <dd>Work on code relating to authorization, roles, and permissions.</dd>
      <dt><unicode>ğŸ©¹</unicode> <shortcode>`:adhesive_bandage:`</shortcode></dt>
      <dd>straightforward fix for a non-critical issue.</dd>
      <dt><unicode>ğŸ§</unicode> <shortcode>`:monocle_face:`</shortcode></dt>
      <dd>Data exploration/inspection.</dd>
      <dt><unicode>âš°ï¸</unicode> <shortcode>`:coffin:`</shortcode></dt>
      <dd>Remove dead code.</dd>
      <dt><unicode>ğŸ§ª</unicode> <shortcode>`:test_tube:`</shortcode></dt>
      <dd>Add a failing test.</dd>
      <dt><unicode>ğŸ‘”</unicode> <shortcode>`:necktie:`</shortcode></dt>
      <dd>Add or update business logic.</dd>
      <dt><unicode>ğŸ©º</unicode> <shortcode>`:stethoscope:`</shortcode></dt>
      <dd>Add or update healthcheck.</dd>
      <dt><unicode>ğŸ§±</unicode> <shortcode>`:bricks:`</shortcode></dt>
      <dd>Infrastructure related changes.</dd>
      <dt><unicode>ğŸ§‘â€ğŸ’»</unicode> <shortcode>`:technologist:`</shortcode></dt>
      <dd>Improve developer experience.</dd>
      <dt><unicode>ğŸ’¸</unicode> <shortcode>`:money_with_wings:`</shortcode></dt>
      <dd>Add sponsorships or money related infrastructure.</dd>
      <dt><unicode>ğŸ§µ</unicode> <shortcode>`:thread:`</shortcode></dt>
      <dd>Add or update code related to multithreading or concurrency.</dd>
      <dt><unicode>ğŸ¦º</unicode> <shortcode>`:safety_vest:`</shortcode></dt>
      <dd>Add or update code related to validation.</dd>
    </dl>

    Other unofficial emojis **may** be used as needed:

    <dl>
      <dt><unicode>ğŸ¤–</unicode> <shortcode>`:robot:`</shortcode></dt>
      <dd>Add or update a code generator instructions.</dd>
      <dt><unicode>ğŸ§¬</unicode> <shortcode>`:dna:`</shortcode></dt>
      <dd>Add or update mutation tests.</dd>
      <dt><unicode>ğŸ•µï¸</unicode> <shortcode>`:detective:`</shortcode></dt>
      <dd>Enhance observability.</dd>
      <dt><unicode>ğŸ¦•</unicode> <shortcode>`:sauropod:`</shortcode></dt>
      <dd>Ensure backward compatibility.</dd>
      <dt><unicode>ğŸ”—</unicode> <shortcode>`:link:`</shortcode></dt>
      <dd>Changes related to URI/URLs.</dd>
    </dl>
  </instruction>
  <instruction>With type `feat`, prefer using: `âœ¨`, `ğŸ—ï¸` Gitmojis.</instruction>
  <instruction>With type `fix`, prefer using: `ğŸ›`, `ğŸš‘ï¸`, `ğŸ©¹`, `ğŸš¨`, `ğŸ”’ï¸` Gitmojis.</instruction>
  <instruction>With type `docs`, prefer using: `ğŸ“` Gitmoji.</instruction>
  <instruction>With type `style`, prefer using: `ğŸ¨`, `ğŸš¨` Gitmojis.</instruction>
  <instruction>With type `refactor`, prefer using: `â™»ï¸`,`ğŸšš` Gitmojis.</instruction>
  <instruction>With type `perf`, prefer using: `âš¡` Gitmoji.</instruction>
  <instruction>With type `test`, prefer using: `âœ…`, `ğŸ§ª`, `ğŸ§¬` Gitmojis.</instruction>
  <instruction>With type `build`, prefer using: `ğŸ”§`, `ğŸ”¨`, `ğŸš€`, `â•`, `â–`, `â¬†ï¸`, `â¬‡ï¸`, `ğŸ“Œ` Gitmojis.</instruction>
  <instruction>With type `ci`, prefer using: `ğŸ‘·`, `ğŸ’š`, `ğŸ”§` Gitmojis.</instruction>
  <instruction>A commit concerning a `.gitignore` file **must** use a `ğŸ™ˆ` Gitmoji.</instruction>
</instructions>

{/* CSpell:ignore tada iphone */}

Refer to the [Gitmoji guide](https://gitmoji.dev/) for a full list of available
emojis and their purposes.

### Body

<instructions context="body">
  <instruction>The `<body/>` **must** begin one blank line after the `<subject/>`.</instruction>
  <instruction>The `<body/>` **must** be wrapped at 72 characters.</instruction>
  <instruction>The `<body/>` is free-form and **may** consist of any number of
  newline separated paragraphs.</instruction>
  <instruction>The `<body/>` use the MarkDown format.</instruction>
  <instruction>Use the `<body/>` to explain what and why compared to how.</instruction>
  <instruction>Use the `<body/>` to provide additional context and details about the changes.</instruction>
</instructions>

### Footer

<instructions context="footer">
<instruction>One or more `<footer/>` **may** be provided one blank line after the `<body/>`.</instruction>
<instruction>
Each `<footer/>` **must** consist of a word `<token/>`, followed by either a
`:<space>` or `<space>#` separator, followed by a string value
(see the [git trailer convention](https://git-scm.com/docs/git-interpret-trailers)).
The footer structures are:
- <output-structure>`<footer><token/> #<issue/> <text/></footer>`</output-structure>
- <output-structure>`<footer><token/>: <text/></footer>`</output-structure>
</instruction>
<instruction>
A `<footer/>`'s token **must** use `-` in place of whitespace characters,
<example><output>Acked-by</output></example>
(this helps differentiate the footer section from a multi-paragraph body).
An exception is made for `BREAKING CHANGE`, which **may** also be used as a token.
</instruction>
<instruction>
A footer's value **may** contain spaces and newlines,
and parsing **must** terminate when the next valid footer token/separator pair is observed.
</instruction>
<example>
<output>
```text
BREAKING CHANGE: environment variables now take precedence over config files.
Closes #123
Fix #123
Refs: #34, #45
Signed-off-by: Bob <bob@example.com>
Acked-by: Alice <alice@example.com>
Helped-by: Junio C Hamano <gitster@pobox.com>
Reference-to: 8bc9a0c769 (Add copyright notices., 2005-04-07)
See-also: fe3187489d69c4 (subject of related commit)
```
</output>
</example>
</instructions>

{/* CSpell:ignore Junio Hamano Acked */}

### Breaking Changes

<instructions context="breaking-change">
  <instruction>
    Breaking changes **must** be indicated in the type/scope prefix of a commit,
    or as an entry in the footer.
  </instruction>
  <instruction>
    If included as a `<footer/>`, a breaking change **must** consist of the
    uppercase text `BREAKING CHANGE`, followed by a colon `:`, space ` `,
    and description.
    The footer structure is
    <output-structure>`<footer><breaking-change optional>BREAKING CHANGE: <description for="breaking change" /></breaking-change></footer>`</output-structure>
    <example><output>`BREAKING CHANGE: environment variables now take precedence over config files.`</output></example>
  </instruction>
  <instruction>
  If included in the `<type/>` prefix,
  breaking changes **must** be indicated by a `!` immediately before the `:`.
  If `!` is used, `BREAKING CHANGE:` **may** be omitted from the `<footer/>` section,
  and the commit <description/> **shall** be used to describe the breaking change.
  </instruction>
  <instruction>
    A breaking change **must** be described in the `<body/>` of the commit message.
  </instruction>
</instructions>

### Example Commit Message

<example><output>

```text
feat(user-auth): âœ¨ add login functionality

Add a custom User source to Symfony's security configuration to handle
login requests.

```

</output></example>

## Conventions

- files in `.github` are either related to Continuous Integration (CI) or
  contain instructions for GitHub Copilot (developer experience).

## Conclusion

By following these guidelines and applying the necessary tools,
you help create high-quality, user-friendly commit messages for your repository,
ensuring consistency and clarity in your project's history.

{/* CSpell:ignore Gitmoji Gitmojis bento Symfony */}
