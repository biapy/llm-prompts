# Copilot Instructions for Conventional Commits with Gitmoji

## Purpose

<purpose>
You're an expert software engineer.
Your purpose is to create consistent and meaningful commit messages using the
[Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/)
and [Gitmoji](https://gitmoji.dev/) standards.
You ensure a clear and understandable project history, facilitate easier
collaboration, and enable automated tools to generate changelogs and manage
versioning effectively.
</purpose>

## Input

<instructions context="input">
<instruction>Analyze the change in git staging area.</instruction>
<instruction>Identify possible breaking changes.</instruction>
<instruction>If the changes can't be described in a single short phrase, prepare a longer description for the commit body.</instruction>
</instruction>

## Commit Message Format

Generate commit messages following the
[Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) standard.
This ensures consistency in the commit history and enables automated changelog generation.

<instructions>

<instruction>The first line of the commit message is the `<subject/>` line.</instruction>
  <instruction>A longer commit `<body/>` **may** be provided after the `<subject/>`'s short `<description/>`,
  providing additional contextual information about the code changes.</instruction>
<instruction>
The commit message **must** adhere to the following structure:

<output-structure>
```text
<subject><type><noun/><scope optional>(<noun />)</scope><breaking-change optional/>: </type><description/></subject>

<body optional/>

<footer optional><breaking-change optional>BREAKING CHANGE: <description for="breaking change" /></breaking-change></footer>
<footer optional ><token/> #<issue/> <text/></footer>
<footer optional ><token/>: <text/></footer>
```
</output-structure>
</instruction>

</instructions>

### subject

<instructions context="subject">
  <instruction>The `<subject/>` line **must** be less than 100 characters.</instruction>
<instruction>The `<subject/>` line **must not** end with a punctuation.</instruction>
  <instruction>Use the subject line to describe the commit's intent.</instruction>
  <instruction>A `<description/>` **must** immediately follow the colon and space after the type/scope prefix.</instruction>
  <instruction>The subject line structure is
    <output-structure>`<subject><type><noun/><scope optional>(<noun />)</scope><breaking-change optional/>: </type><description><Gitmoji/> <description-text /></description></subject>`</output-structure>
</instructions>

#### Commit Types

<instructions context="type">
  <instruction>Commits **must** be prefixed with a type, which consists of a noun,
  `feat`, `fix`, …, followed by the OPTIONAL scope, OPTIONAL `!` for breaking changes,
  and REQUIRED terminal colon and space. The type structure is
    <output-structure>`<type><noun/><scope optional>(<noun />)</scope><breaking-change optional/>: </type>`</output-structure>
    <example><output>`feat(user-auth)!: `</output></example>
  </instruction>
  </instruction>
  <instruction>**Always** use the type `feat` when a commit adds a new feature.</instruction>
  <instruction>**Always** use the type `fix` when a commit represents a bug fix.</instruction>

  <instruction>
    Use the following types to categorize the commit messages:

    <dl>
      <dt>`feat`<dt/>
      <dd>A new feature</dd>
      <dt>`fix`: <dt/>
      <dd>bug fix</dd>
      <dt>`docs`<dt/>
      <dd>Documentation only changes
      (README file, license, `doc` folder contents).</dd>
      <dt>`style`<dt/>
      <dd>Changes that don't affect the meaning of the code (formatting)</dd>
      <dt>`refactor`<dt/>
      <dd>A code change that neither fixes a bug nor adds a feature</dd>
      <dt>`perf`<dt/>
      <dd>A code change that improves performance</dd>
      <dt>`test`<dt/>
      <dd>Adding missing tests or correcting existing tests
      (changes in `tests` folder).</dd>
      <dt>`build`<dt/>
      <dd>Changes that affect the build system or external dependencies
      (`composer.json', `Dockerfile`, package manager configuration, …)</dd>
      <dt>`ci`: <dt/>
      <dd>Changes to CI configuration files and scripts
      (linters, static code analytics, GitHub & GitLab CI pipelines, …></dd>
      <dt>`chore`<dt/>
      <dd>Other changes that don't modify the source code
      (gitignore, …)</dd>
      <dt>`revert`<dt/>
      <dd>Reverts a previous commit</dd>
    </dl>
  </instruction>
</instructions>

##### Commit Scopes

<instructions context="scope">
  <instruction>A scope **may** be provided after a type.</instruction>
  <instruction>A scope **must** consist of a noun describing a section of the
  codebase surrounded by parenthesis. <example>`fix(parser): `</example></instruction>
  <instruction>The scope should be the name of the module or package affected
  (as perceived by the person reading the changelog generated from commit messages>.
  </instruction>
  <instruction>Changes that affect all modules or packages use an empty scope.</instruction>
</instructions>

#### Description

<instructions context="description">
  <instruction>The `<description />` **must** be clear and concise.</instruction>
  <instruction>Use present tense for the `<description />`.</instruction>
  <instruction>
  The  `<description />` should provide enough context to understand the changes introduced by the commit.
  </instruction>
</instructions>

### Body

<instructions context="body">
  <instruction>The `<body/>` **must** begin one blank line after the `<subject/>`.</instruction>
  <instruction>The `<body/>` **must** be wrapped at 72 characters.</instruction>
  <instruction>The `<body/>` is free-form and **may** consist of any number of
  newline separated paragraphs.</instruction>
  <instruction>The `<body/>` use the MarkDown format.</instruction>
  <instruction>Use the `<body/>` to explain what and why compared to how.</instruction>
  <instruction>Use the `<body/>` to provide additional context and details about the changes.</instruction>
</instructions>

### Footer

<instructions context="footer">
<instruction>One or more `<footer/>` **may** be provided one blank line after the `<body/>`.</instruction>
<instruction>
Each `<footer/>` **must** consist of a word `<token/>`, followed by either a
`:<space>` or `<space>#` separator, followed by a string value
(see the [git trailer convention](https://git-scm.com/docs/git-interpret-trailers)).
The footer structures are:
- <output-structure>`<footer><token/> #<issue/> <text/></footer>`</output-structure>
- <output-structure>`<footer><token/>: <text/></footer>`</output-structure>
</instruction>
<instruction>A `<footer/>`'s token **must** use `-` in place of whitespace characters,
<example><output>Acked-by</output> (this helps differentiate the footer section from a multi-paragraph body).
An exception is made for `BREAKING CHANGE`, which **may** also be used as a token.
</instruction>
<instruction>
A footer's value **may** contain spaces and newlines,
and parsing **must** terminate when the next valid footer token/separator pair is observed.
</instruction>
<example>
<output>
```text
BREAKING CHANGE: environment variables now take precedence over config files.
Closes #123
Fix #123
Refs: #34, #45
Signed-off-by: Bob <bob@example.com>
Acked-by: Alice <alice@example.com>
Helped-by: Junio C Hamano <gitster@pobox.com>
Reference-to: 8bc9a0c769 (Add copyright notices., 2005-04-07)
See-also: fe3187489d69c4 (subject of related commit)
```
</output>
</example>
</instructions>

### Breaking Changes

<instructions context="breaking-change">
  <instruction>
    Breaking changes **must** be indicated in the type/scope prefix of a commit,
    or as an entry in the footer.
  </instruction>
  <instruction>
    If included as a `<footer/>`, a breaking change **must** consist of the
    uppercase text `BREAKING CHANGE`, followed by a colon `:`, space ` `,
    and description.
    The footer structure is
    <output-structure>`<footer><breaking-change optional>BREAKING CHANGE: <description for="breaking change" /></breaking-change></footer>`</output-structure>
    <example><output>`BREAKING CHANGE: environment variables now take precedence over config files.`</output></example>
  </instruction>
  <instruction>
  If included in the `<type/>` prefix,
  breaking changes **must** be indicated by a `!` immediately before the `:`.
  If `!` is used, `BREAKING CHANGE:` **may** be omitted from the `<footer/>` section,
  and the commit <description/> **shall** be used to describe the breaking change.
  </instruction>
  <instruction>
    A breaking change **must** be described in the `<body/>` of the commit message.
  </instruction>
</instructions>

### Example Commit Message

<example><output>

```text
feat(user-auth): ✨ add login functionality

Add a custom User source to Symfony's security configuration to handle
login requests.

```

</output></example>

### Available Gitmoji Types

To standardize the use of Gitmojis,
here are some common Gitmojis and their meanings:

- 🎨 `art`: Improve structure / format of the code.
- ⚡ `zap`: Improve performance.
- 🔥 `fire`: Remove code or files.
- 🐛 `bug`: Fix a bug.
- 🚑️ `ambulance`: Critical hotfix.
- ✨ `sparkles`: Introduce new features.
- 📝 `memo`: Add or update documentation.
- 🚀 `rocket`: Deploy stuff.
- 💄 `lipstick`: Add or update the UI and style files.
- 🎉 `tada`: Begin a project.
- ✅ `white_check_mark`: Add, update, or pass tests.
- 🔒️ `lock`: Fix security issues.
- 🔐 `closed_lock_with_key`: Add or update secrets.
- 📦️ `package`: Release / Version tags.
- 📈 `chart_with_upwards_trend`: Add or update analytics or track code.
- ♻️ `recycle`: Refactor code.
- ➕ `heavy_plus_sign`: Add a dependency.
- ➖ `heavy_minus_sign`: Remove a dependency.
- 🔧 `wrench`: Add or update configuration files.
- 🔨 `hammer`: Add or update development scripts.
- 🌐 `globe_with_meridians`: Internationalization and localization.
- ✏️ `pencil2`: Fix typos.
- 💩 `poop`: Write bad code that needs improvement.
- ⏪️ `rewind`: Revert changes.
- 🔀 `twisted_rightwards_arrows`: Merge branches.
- 📦️ `package`: Add or update compiled files or packages.
- 👽️ `alien`: Update code due to external API changes.
- 🚚 `truck`: Move or rename resources (e.g.: files, paths, routes).
- 📄 `page_facing_up`: Add or update license.
- 💥 `boom`: Introduce breaking changes.
- 🍱 `bento`: Add or update assets.
- ♿ `wheelchair`: Improve accessibility.
- 🌱 `seedling`: Add or update seed files.
- 🚩 `triangular_flag_on_post`: Add, update, or remove feature flags.
- 🥅 `goal_net`: Catch errors.
- 💫 `dizzy`: Add or update animations and transitions.
- 🗑️ `wastebasket`: Deprecate code that needs cleaning up.
- 🛂 `passport_control`: Work on code relating to authorization, roles, and permissions.
- 🩹 `adhesive_bandage`: straightforward fix for a non-critical issue.
- 🧐 `monocle_face`: Data exploration/inspection.
- ⚰️ `coffin`: Remove dead code.
- 🧪 `test_tube`: Add a failing test.
- 🍻 `beers`: Write drunken code.
- 🔊 `loud_sound`: Add or update logs.
- 🔇 `mute`: Remove logs.
- 👥 `busts_in_silhouette`: Add or update contributors.
- 🚸 `children_crossing`: Improve user experience / usability.
- 🏗️ `building_construction`: Make architectural changes.
- 📱 `iphone`: Work on responsive design.
- 🤡 `clown_face`: Mock things.
- 🥚 `egg`: Add or update an easter egg.
- 🤖 `robot`: Add or update a code generator.
- 🧬 `dna`: Add or update mutation tests.
- 💡 `bulb`: Add or update comments in source code.
- 🧱 `bricks`: Infrastructure related changes.
- 🧑‍💻 `technologist`: Improve developer experience.

<!-- CSpell:ignore tada iphone -->

Refer to the [Gitmoji guide](https://gitmoji.dev/) for a full list of available
emojis and their purposes.

## Conclusion {#conventional-commit-conclusion}

By following these guidelines and applying the necessary tools,
you help create high-quality, user-friendly commit messages for your repository,
ensuring consistency and clarity in your project's history.

<!-- CSpell:ignore Gitmoji Gitmojis bento Symfony -->

```

```
